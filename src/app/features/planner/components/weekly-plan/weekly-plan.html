<div class="w-[70%] min-h-[500px] mx-auto">
  @if (isLoading()) {
    <div class="flex justify-center items-center min-h-[500px]">
      <p-progressSpinner />
    </div>
  } @else {
    <app-container [color]="'#e6f7fb'">
      <div class="flex flex-col h-full w-full gap-4 p-4">

        <!-- Título -->
        <app-week-title 
          [weekNumber]="currentWeekNumber()"
          [startDate]="weekStartDate()"
          [endDate]="weekEndDate()"
          (onWeekChange)="changeWeek($event)"
          (onDateRangeChange)="handleDateRangeChange($event)"
        ></app-week-title>

        <!-- Row principal -->
        <div class="flex flex-col md:flex-row w-full gap-6">

          <!-- Sección de contenido -->
          <app-content-section 
            class="w-full"
            [contents]="programmaticContents()"
            [selectedContentId]="selectedContent()?.id || null"
            (onContentSelect)="selectContent($event)"
          ></app-content-section>

          <!-- Sección de actividades -->
          <app-activity-section 
            class="w-full"
            [activities]="selectedActivities()"
            [showActivities]="selectedContent() !== null"
            [programmaticContentId]="selectedContent()?.id || null"
            (onActivityCreated)="handleActivityCreated()"
            (onActivityDeleted)="handleActivityDeleted($event)"
          ></app-activity-section>
        </div>

        <div class="separator"></div>
        <!-- Título de bibliografía -->
        <h3 class="text-lg font-semibold">Bibliografía</h3>

        <div class="w-full">
          <div class="min-h-[40px] bg-white rounded-lg shadow w-full border border-gray-200 p-2">
            @if (bibliographicReferences().length > 0) {
              <ul class="ml-2 list-disc list-inside text-sm text-gray-700">
                @for (reference of bibliographicReferences(); track reference) {
                  <li>{{ reference }}</li>
                }
              </ul>
            } @else {
              <p class="text-sm text-gray-500 italic">No hay referencias bibliográficas</p>
            }
          </div>
        </div>
      </div>
    </app-container>
  }
</div>