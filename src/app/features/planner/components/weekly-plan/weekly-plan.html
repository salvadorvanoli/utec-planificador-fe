<div class="w-[70%] min-h-[500px] mx-auto">
  @if (isLoading()) {
    <div class="flex justify-center items-center min-h-[500px]">
      <p-progressSpinner />
    </div>
  } @else {
    <app-container [color]="'#e6f7fb'">
      <div class="flex flex-col h-full w-full gap-4 p-4">

        <!-- Título -->
        <app-week-title 
          [weekNumber]="currentWeekNumber()"
          [startDate]="weekStartDate()"
          [endDate]="weekEndDate()"
          [courseStartDate]="courseStartDate()"
          [courseEndDate]="courseEndDate()"
          (onWeekChange)="changeWeek($event)"
          (onDateRangeChange)="handleDateRangeChange($event)"
        ></app-week-title>

        <!-- Row principal -->
        <div class="flex flex-col md:flex-row w-full gap-6">

          <!-- Sección de contenido -->
          <app-content-section 
            class="w-full"
            [contents]="programmaticContents()"
            [selectedContentId]="selectedContent()?.id || null"
            [weeklyPlanningId]="weeklyPlanningId()"
            (onContentSelect)="selectContent($event)"
            (onContentCreated)="handleContentCreated()"
            (onContentDeleted)="handleContentDeleted($event)"
          ></app-content-section>

          <!-- Sección de actividades -->
          <app-activity-section 
            class="w-full"
            [activities]="selectedActivities()"
            [showActivities]="selectedContent() !== null"
            [programmaticContentId]="selectedContent()?.id || null"
            (onActivityCreated)="handleActivityCreated()"
            (onActivityDeleted)="handleActivityDeleted($event)"
          ></app-activity-section>
        </div>

        <div class="separator"></div>
        
        <!-- Componente de bibliografía -->
        <app-bibliography 
          [references]="bibliographicReferences()"
          (addReference)="handleAddReference($event)"
          (deleteReference)="handleDeleteReference($event)"
        ></app-bibliography>
      </div>
    </app-container>
  }
</div>