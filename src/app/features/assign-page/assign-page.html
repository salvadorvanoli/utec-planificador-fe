<app-section-header
    text="Crear curso"
    [color]="'blue'"
    [showIcon]="true"
    [infoType]="InfoType.ASSIGN_COURSES"
/>

<div class="row mt-4 mb-10 grid grid-cols-1 md:grid-cols-2 gap-10 w-8/10 mx-auto align-items-stretch">
  <!-- Teacher Selection (Multiple) -->
  <div>
    <label for="select_teachers" class="block text-sm font-medium mb-1">
      Docentes
    </label>
    @if (isLoadingTeachers()) {
      <p class="text-gray-500">Cargando docentes...</p>
    } @else {
      <app-multiselect
        id="select_teachers"
        [color]="'black'"
        [placeholder]="'Seleccione uno o mÃ¡s docentes'"
        [options]="teacherOptions()"
        [selectedValues]="selectedTeachers()"
        (onSelectionChange)="onTeachersChange($event)"
        [showClear]="true"
        [filter]="true"
        [filterPlaceholder]="'Buscar docente'"
        class="w-full"
      ></app-multiselect>
    }
  </div>

  <!-- Curricular Unit Selection -->
  <div>
    <label for="select_curricular_unit" class="block text-sm font-medium mb-1">
      Unidad Curricular
    </label>
    @if (isLoadingCurricularUnits()) {
      <p class="text-gray-500">Cargando unidades curriculares...</p>
    } @else {
      <app-select 
        id="select_curricular_unit"
        [color]="'black'" 
        [placeholder]="'Seleccione una unidad curricular'"
        [options]="curricularUnitOptions()"
        [selectedValue]="selectedCurricularUnit()"
        (onSelectionChange)="onCurricularUnitChange($event)"
        class="w-full"
      ></app-select>
    }
  </div>
</div>

<!-- Course Info Component (Creation Mode) -->
<app-course-info
  [courseData]="null"
  [isLoading]="false"
  [isAdminMode]="true"
  [curricularUnitId]="selectedCurricularUnit() ? +selectedCurricularUnit() : null"
  [teacherIds]="selectedTeacherIds()"
  (onCourseCreated)="onCourseCreated($event)"
></app-course-info>

<!-- Create Button -->
<div class="mt-4 mb-10 w-8/10 mx-auto">
@if (isFormValid()) {
  <app-button
    label="Crear curso"
    [color]="'blue'"
    fontFamily="'UTEC Text Light', Arial, sans-serif"
    fontWeight="300"
    fontSize="1.5rem"
    (onClick)="onCreateCourse()"
  ></app-button>
} @else {
  <app-button
    label="Crear curso"
    [color]="'black'"
    fontFamily="'UTEC Text Light', Arial, sans-serif"
    fontWeight="300"
    fontSize="1.5rem"
    [textColor]="'#9CA3AF'"
  ></app-button>
}
</div>
